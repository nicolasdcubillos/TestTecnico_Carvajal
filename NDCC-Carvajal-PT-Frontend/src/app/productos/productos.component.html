<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<div class="container">

    <form [formGroup]="form" (ngSubmit)="update()">
    <table class="table">
        <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Descuento</th>
          <th scope="col">Valor</th>
          <th>
            <button
              type="button"
              title="Add New product"
              class="btn btn-primary"
              (click)="addProduct()"
            >
            <i class="bi bi-plus"></i>
            </button>
          </th>
        </tr>
      </thead>

      <tbody>
        <ng-container *ngFor="let product of productos; let i = index">
          <tr
                  *ngIf="productSelected != product"
                  (click)="selectProduct(product)"
              >
            <td>{{ product.proID }}</td>
            <td>{{ product.proDesc }}</td>
            <td class="hidetext">{{ product.proValor }}</td>
            <td>
              <button
                class="btn btn-danger btn-sm mx-1"
                title="Delete product"
                type="button"
                (click)="deleteProduct(product.proID)"
              >
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
      
              <tr *ngIf="productSelected == product" class="table-primary">
                <td>{{ product.proID }}</td>
            <td>
              <input
                type="text"
                class="form-control"
                formControlName="descuento"
                [value]="product.proDesc"
                title="Descuento"
                />
            </td>
            <td>
                <input
                  type="text"
                  class="form-control"
                  formControlName="valor"
                  [value]="product.proValor"
                  title="Valor"
                  />
              </td>
            <td>             
              <button
                  class="btn btn-primary btn-sm mx-1"
                  title="update"
                  type="submit"
                  [disabled]="form.invalid"
                >
                  <i class="bi bi-lightning"></i>
                </button>
      
                <button
                  class="btn btn-danger btn-sm mx-1"
                  title="Cancel Changes"
                  type="button"
                  (click) = "cancel()"
                >
                  <i class="bi bi-x-lg"></i>
                </button>
              </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
    </form>
</div>